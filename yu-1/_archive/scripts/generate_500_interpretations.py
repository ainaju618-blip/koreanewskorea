"""
500개 해석 자동 생성 스크립트
- 25개 핵심 카테고리 × 20개 템플릿 = 500개 해석
- 긍정 템플릿(10개) + 주의 템플릿(10개)
- hexagram score/direction 기반 매칭

Usage:
    python scripts/generate_500_interpretations.py --output sql    # SQL 파일 생성
    python scripts/generate_500_interpretations.py --output json   # JSON 파일 생성
    python scripts/generate_500_interpretations.py --insert        # DB 직접 삽입
"""

import json
import random
from pathlib import Path
from typing import List, Dict, Tuple

# ========== 1. 25개 핵심 카테고리 선정 ==========
# 9대분류에서 각 2~3개씩 선정
SELECTED_CATEGORIES = [
    # 재물 (4개)
    {"id": 1, "major": "재물", "sub": "주식/증권", "icon": "💰"},
    {"id": 2, "major": "재물", "sub": "코인/가상자산", "icon": "💰"},
    {"id": 3, "major": "재물", "sub": "부동산/아파트", "icon": "💰"},
    {"id": 7, "major": "재물", "sub": "복권/로또", "icon": "💰"},

    # 직업 (4개)
    {"id": 21, "major": "직업", "sub": "이직", "icon": "💼"},
    {"id": 22, "major": "직업", "sub": "취업/면접", "icon": "💼"},
    {"id": 23, "major": "직업", "sub": "승진", "icon": "💼"},
    {"id": 25, "major": "직업", "sub": "창업", "icon": "💼"},

    # 학업 (3개)
    {"id": 36, "major": "학업", "sub": "수능/입시", "icon": "📚"},
    {"id": 37, "major": "학업", "sub": "자격증", "icon": "📚"},
    {"id": 38, "major": "학업", "sub": "공무원시험", "icon": "📚"},

    # 연애 (4개)
    {"id": 46, "major": "연애", "sub": "썸/호감", "icon": "💕"},
    {"id": 47, "major": "연애", "sub": "고백", "icon": "💕"},
    {"id": 49, "major": "연애", "sub": "결혼", "icon": "💕"},
    {"id": 48, "major": "연애", "sub": "재회", "icon": "💕"},

    # 대인 (3개)
    {"id": 61, "major": "대인", "sub": "친구", "icon": "👥"},
    {"id": 62, "major": "대인", "sub": "부모/가족", "icon": "👥"},
    {"id": 27, "major": "직업", "sub": "직장동료/상사", "icon": "👥"},

    # 건강 (3개)
    {"id": 69, "major": "건강", "sub": "수술/치료", "icon": "🏥"},
    {"id": 70, "major": "건강", "sub": "다이어트", "icon": "🏥"},
    {"id": 72, "major": "건강", "sub": "정신건강", "icon": "🏥"},

    # 취미 (2개)
    {"id": 81, "major": "취미", "sub": "여행", "icon": "🎮"},
    {"id": 82, "major": "취미", "sub": "경마/도박", "icon": "🎮"},

    # 운명 (2개)
    {"id": 89, "major": "운명", "sub": "꿈해몽", "icon": "✨"},
    {"id": 90, "major": "운명", "sub": "이사/택일", "icon": "✨"},
]

# ========== 2. 카테고리별 해석 템플릿 (20개씩) ==========
# 긍정 10개 + 주의 10개

INTERPRETATION_TEMPLATES = {
    # ===== 재물 카테고리 =====
    "주식/증권": {
        "positive": [
            "{gua_name}({gua_hanja})의 기운이 상승세를 보여주고 있습니다. 투자에 좋은 흐름이니 매수 타이밍을 놓치지 마세요.",
            "지금 {gua_name}괘가 나왔으니 주식시장에서 긍정적인 기운이 감지됩니다. 단, 분할매수로 리스크를 관리하세요.",
            "{yao_pos}의 위치에서 {gua_name}이 나타났습니다. 상승 에너지가 강하니 보유 종목의 수익 실현을 기대해도 좋습니다.",
            "용이 하늘로 오르는 {gua_name}의 기운입니다. 그동안 관심 두었던 종목에서 좋은 소식이 있을 수 있습니다.",
            "{gua_name}괘는 형통의 기운을 품고 있습니다. 장기 투자자에게 특히 유리한 시기입니다.",
            "밝은 기운의 {gua_name}입니다. 정보력과 판단력이 높아지는 시기이니 신중히 분석 후 투자하세요.",
            "{gua_name}의 {yao_pos}는 재물운 상승을 암시합니다. 소액부터 시작해 점진적으로 늘려가는 전략이 좋습니다.",
            "땅에서 용이 나타나는 {gua_name}의 기운. 숨겨진 가치주를 발견할 수 있는 시기입니다.",
            "{gua_name}({gua_hanja})의 길한 기운이 투자운을 밝게 비춥니다. 조급해하지 않으면 원하는 수익을 얻을 수 있습니다.",
            "하늘의 도움이 있는 {gua_name}괘입니다. 전문가의 조언을 참고하면 더 좋은 결과를 얻을 수 있습니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})괘가 나왔습니다. 지금은 관망하는 것이 좋겠습니다. 섣부른 매수는 손실로 이어질 수 있습니다.",
            "어두운 기운의 {gua_name}입니다. 투자보다는 현금 보유를 권합니다. 급락에 대비하세요.",
            "{yao_pos}에서 나온 {gua_name}은 변동성 확대를 경고합니다. 손절라인을 반드시 설정하세요.",
            "{gua_name}의 기운이 막혀 있습니다. 지금 매수하면 물릴 확률이 높으니 더 좋은 타이밍을 기다리세요.",
            "용이 잠들어 있는 {gua_name}입니다. 시장이 침체기에 있으니 무리한 투자는 금물입니다.",
            "{gua_name}괘는 조심을 요합니다. 확실한 정보 없이 소문만 듣고 투자하면 낭패를 볼 수 있습니다.",
            "흉한 기운이 감지되는 {gua_name}의 {yao_pos}입니다. 레버리지 투자는 절대 피하세요.",
            "{gua_name}({gua_hanja})가 경고합니다. 이 시기에는 본전 유지도 성공입니다. 욕심을 버리세요.",
            "험난한 물길을 건너는 {gua_name}의 상입니다. 리스크 관리 없이는 큰 손실이 우려됩니다.",
            "{gua_name}괘는 기다림을 요청합니다. 지금 투자하면 오랜 기간 묶일 수 있으니 인내하세요.",
        ],
    },

    "코인/가상자산": {
        "positive": [
            "{gua_name}({gua_hanja})의 상승 기운이 코인 시장에 불을 지피고 있습니다. 분할 매수로 진입해 보세요.",
            "비상하는 용의 {gua_name}괘! 알트코인에서 좋은 기회가 올 수 있습니다.",
            "{yao_pos}의 {gua_name}은 변화의 조짐입니다. 새로운 프로젝트 코인에 주목하세요.",
            "{gua_name}의 밝은 기운이 디지털 자산운을 높여줍니다. 장기 홀딩 전략이 유효합니다.",
            "형통의 {gua_name}({gua_hanja})입니다. 그동안 묻어둔 코인에서 반등 신호가 올 수 있습니다.",
            "{gua_name}괘의 기운으로 보아 업비트보다 해외 거래소에서 좋은 기회가 있을 수 있습니다.",
            "하늘과 땅이 교감하는 {gua_name}의 시기. 에어드랍이나 스테이킹 이벤트를 노려보세요.",
            "{gua_name}의 {yao_pos}는 급등의 전조입니다. 단, 익절 타이밍도 미리 정해두세요.",
            "길한 {gua_name}괘가 코인 투자에 청신호를 보냅니다. 소액으로 시작해 감을 익히세요.",
            "{gua_name}({gua_hanja})의 밝은 에너지가 가상자산 포트폴리오를 빛나게 합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 하강 기운입니다. 지금은 코인 거래를 쉬어가는 것이 좋겠습니다.",
            "폭락 조짐이 보이는 {gua_name}괘. 선물이나 레버리지는 절대 금지입니다.",
            "{yao_pos}의 {gua_name}은 사기 코인 주의보입니다. 모르는 프로젝트에 투자하지 마세요.",
            "어두운 {gua_name}의 기운. 지금 물타기하면 더 큰 손실로 이어질 수 있습니다.",
            "{gua_name}괘가 막힘을 암시합니다. 출금이나 거래소 이슈에 대비하세요.",
            "용이 늪에 빠진 {gua_name}의 상. 김치 프리미엄에 현혹되지 마세요.",
            "{gua_name}({gua_hanja})는 인내를 요구합니다. 본전 생각에 조급해하면 더 잃습니다.",
            "험한 물길의 {gua_name}입니다. 유동성 리스크가 크니 대형 코인만 보유하세요.",
            "{gua_name}의 {yao_pos}는 해킹이나 피싱 주의를 알립니다. 지갑 보안을 점검하세요.",
            "흉한 {gua_name}괘. 지금은 현금화하고 시장 밖에서 관망하는 것이 현명합니다.",
        ],
    },

    "부동산/아파트": {
        "positive": [
            "{gua_name}({gua_hanja})의 안정적인 기운입니다. 실거주 목적의 매수라면 좋은 시기입니다.",
            "땅의 기운이 강한 {gua_name}괘. 지금 본 매물이 좋은 선택이 될 수 있습니다.",
            "{yao_pos}의 {gua_name}은 터전을 잡기 좋은 시기를 알립니다. 청약에 도전해 보세요.",
            "{gua_name}의 상승 기운이 부동산 가치 상승을 암시합니다. 장기 보유 전략이 유효합니다.",
            "하늘과 땅이 화합하는 {gua_name}({gua_hanja}). 전세보다 매매가 유리한 시기입니다.",
            "{gua_name}괘의 길한 기운으로 보아 고민 중인 지역에 좋은 소식이 있을 수 있습니다.",
            "든든한 기반을 세우는 {gua_name}의 시기. 갭투자보다 실거주를 권합니다.",
            "{gua_name}의 {yao_pos}는 이사 운이 좋음을 알립니다. 새 터전에서 행운이 기다립니다.",
            "형통의 {gua_name}괘. 대출 조건이나 금리 협상에서 좋은 결과를 기대하세요.",
            "{gua_name}({gua_hanja})의 밝은 기운이 내 집 마련의 꿈을 가까이 당겨줍니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 막힘 기운입니다. 지금 매수하면 오랜 기간 시세가 정체될 수 있습니다.",
            "변동의 {gua_name}괘. 전세 사기나 계약 문제에 특히 주의하세요.",
            "{yao_pos}의 {gua_name}은 급매물 함정을 경고합니다. 꼼꼼히 확인 후 계약하세요.",
            "어두운 {gua_name}의 기운. 대출 규제나 금리 인상에 대비해야 합니다.",
            "{gua_name}괘가 경고합니다. 무리한 대출로 집을 사면 역전세 리스크가 있습니다.",
            "땅이 갈라지는 {gua_name}의 상. 재개발/재건축 투자는 불확실성이 큽니다.",
            "{gua_name}({gua_hanja})는 기다림을 요청합니다. 더 좋은 매물이나 가격이 나올 수 있습니다.",
            "험한 물길의 {gua_name}입니다. 경매 투자는 법적 문제에 휘말릴 수 있으니 주의하세요.",
            "{gua_name}의 {yao_pos}는 분쟁 조짐입니다. 계약서 특약 사항을 꼼꼼히 확인하세요.",
            "흉한 {gua_name}괘. 조급함에 계약하면 후회할 수 있으니 신중히 결정하세요.",
        ],
    },

    "복권/로또": {
        "positive": [
            "{gua_name}({gua_hanja})의 횡재 기운이 감지됩니다! 이번 주 로또에 도전해 보세요.",
            "용이 하늘로 오르는 {gua_name}괘. 평소 안 사던 번호가 행운을 가져올 수 있습니다.",
            "{yao_pos}의 {gua_name}은 예상치 못한 행운을 암시합니다. 즉석복권에 행운이 있을지도.",
            "{gua_name}의 밝은 기운이 복권운을 높여줍니다. 꿈에서 힌트를 얻어보세요.",
            "하늘의 선물 같은 {gua_name}({gua_hanja}). 연금복권이 장기적으로 유리해 보입니다.",
            "{gua_name}괘의 길한 기운. 동쪽 방향의 판매점에서 좋은 기운이 느껴집니다.",
            "빛나는 {gua_name}의 시기. 평소 고정번호가 있다면 믿고 계속 구매하세요.",
            "{gua_name}의 {yao_pos}는 합동 구매에 행운이 있음을 알립니다. 친구와 함께 구매해 보세요.",
            "형통의 {gua_name}괘. 스피또나 즉석식 복권에서 소소한 행운이 있을 수 있습니다.",
            "{gua_name}({gua_hanja})의 상승 기운. 당첨 꿈을 꾸었다면 지금이 기회입니다!",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 기운이 약합니다. 과도한 복권 구매는 손실만 키울 수 있습니다.",
            "어두운 {gua_name}괘. 로또보다는 저축이 현명한 시기입니다.",
            "{yao_pos}의 {gua_name}은 헛된 희망을 경고합니다. 복권에 의지하기보다 본업에 충실하세요.",
            "{gua_name}의 막힘 기운. 이번 회차는 건너뛰고 다음 기회를 노리세요.",
            "용이 잠든 {gua_name}({gua_hanja}). 당첨 확률이 낮으니 여유 자금 범위 내에서만 구매하세요.",
            "{gua_name}괘의 불길한 조짐. 대박을 노리다 쪽박 찰 수 있으니 욕심을 버리세요.",
            "흉한 {gua_name}의 시기. 복권 판매점에서 권유하는 번호는 피하세요.",
            "{gua_name}의 {yao_pos}는 중독 위험을 경고합니다. 한 달 복권 예산을 정해두세요.",
            "험난한 {gua_name}괘. 지금 복권을 사면 돈만 날릴 가능성이 높습니다.",
            "{gua_name}({gua_hanja})가 절제를 요청합니다. 행운은 준비된 자에게 오는 법입니다.",
        ],
    },

    # ===== 직업 카테고리 =====
    "이직": {
        "positive": [
            "{gua_name}({gua_hanja})의 변화 기운이 이직에 청신호를 보냅니다. 지금 준비하세요.",
            "용이 하늘로 비상하는 {gua_name}괘. 원하던 회사에서 연락이 올 수 있습니다.",
            "{yao_pos}의 {gua_name}은 새 출발에 유리함을 알립니다. 이력서를 업데이트하세요.",
            "{gua_name}의 상승 기운이 커리어 도약을 도와줍니다. 헤드헌터 연락에 주목하세요.",
            "하늘의 도움이 있는 {gua_name}({gua_hanja}). 면접에서 좋은 인상을 줄 수 있습니다.",
            "{gua_name}괘의 길한 기운. 지금 지원하면 합격 가능성이 높습니다.",
            "새 터전을 잡는 {gua_name}의 시기. 연봉 협상에서도 원하는 조건을 얻을 수 있습니다.",
            "{gua_name}의 {yao_pos}는 인복이 있음을 알립니다. 지인 추천으로 좋은 기회가 올 수 있습니다.",
            "형통의 {gua_name}괘. 경쟁자가 많아도 최종 합격자가 될 가능성이 높습니다.",
            "{gua_name}({gua_hanja})의 밝은 에너지가 새로운 직장 생활을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 정체 기운입니다. 지금 이직은 시기상조일 수 있습니다.",
            "어두운 {gua_name}괘. 현 직장에서 더 배울 것이 있으니 조급해하지 마세요.",
            "{yao_pos}의 {gua_name}은 이직 후 후회를 경고합니다. 꼼꼼히 조사 후 결정하세요.",
            "{gua_name}의 막힘 기운. 서류 탈락이 계속될 수 있으니 이력서를 보완하세요.",
            "용이 늪에 빠진 {gua_name}({gua_hanja}). 급여나 복지 조건을 꼼꼼히 확인하세요.",
            "{gua_name}괘가 경고합니다. 지금 이직하면 적응에 어려움을 겪을 수 있습니다.",
            "험난한 {gua_name}의 시기. 이직 제안이 와도 한 번 더 고민하세요.",
            "{gua_name}의 {yao_pos}는 직장 내 갈등을 암시합니다. 이직처의 분위기를 파악하세요.",
            "흉한 {gua_name}괘. 스카우트 제안에 숨겨진 함정이 있을 수 있으니 주의하세요.",
            "{gua_name}({gua_hanja})는 인내를 요청합니다. 더 좋은 기회가 반드시 옵니다.",
        ],
    },

    "취업/면접": {
        "positive": [
            "{gua_name}({gua_hanja})의 상승 기운이 취업문을 활짝 열어줍니다. 자신감을 가지세요!",
            "용이 세상에 나타나는 {gua_name}괘. 면접에서 빛날 수 있습니다.",
            "{yao_pos}의 {gua_name}은 합격의 길조입니다. 지금 지원하세요.",
            "{gua_name}의 밝은 기운이 면접관에게 좋은 인상을 줄 것입니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 최종 합격의 기쁨이 다가오고 있습니다.",
            "{gua_name}괘의 길한 기운. 자소서에 진정성을 담으면 좋은 결과가 있을 것입니다.",
            "비상하는 {gua_name}의 시기. 경쟁률이 높아도 당신이 선택받을 수 있습니다.",
            "{gua_name}의 {yao_pos}는 귀인의 도움을 암시합니다. 선배나 멘토의 조언을 구하세요.",
            "형통의 {gua_name}괘. 걱정을 내려놓고 면접에 집중하면 원하는 결과를 얻습니다.",
            "{gua_name}({gua_hanja})의 밝은 에너지가 새내기 직장인의 시작을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 하강 기운입니다. 면접 준비를 더 철저히 하세요.",
            "어두운 {gua_name}괘. 이번 결과가 좋지 않더라도 포기하지 마세요.",
            "{yao_pos}의 {gua_name}은 서류 탈락을 경고합니다. 지원서를 다시 검토하세요.",
            "{gua_name}의 막힘 기운. 목표 기업을 다양화하는 것이 좋겠습니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 눈높이를 조정하면 기회가 보일 것입니다.",
            "{gua_name}괘가 인내를 요청합니다. 취업 스트레스에 건강 관리도 잊지 마세요.",
            "험난한 {gua_name}의 시기. 면접에서 긴장하지 않도록 충분히 연습하세요.",
            "{gua_name}의 {yao_pos}는 경쟁자가 강함을 암시합니다. 차별화 포인트를 준비하세요.",
            "흉한 {gua_name}괘. 조건이 이상한 채용 공고에는 지원하지 마세요.",
            "{gua_name}({gua_hanja})는 기다림을 요청합니다. 때가 되면 문이 열립니다.",
        ],
    },

    "승진": {
        "positive": [
            "{gua_name}({gua_hanja})의 상승 기운이 승진운을 밝게 비춥니다. 좋은 소식이 곧 올 것입니다.",
            "용이 하늘로 오르는 {gua_name}괘. 임원 발령에서 당신의 이름이 불릴 수 있습니다.",
            "{yao_pos}의 {gua_name}은 노력의 결실을 알립니다. 그동안의 성과가 인정받습니다.",
            "{gua_name}의 길한 기운이 인사고과에서 좋은 평가를 암시합니다.",
            "하늘의 복이 있는 {gua_name}({gua_hanja}). 경쟁자보다 앞서 나갈 수 있습니다.",
            "{gua_name}괘의 밝은 기운. 상사에게 좋은 인상을 심어줄 기회가 옵니다.",
            "성장하는 {gua_name}의 시기. 중요 프로젝트를 맡게 되어 실력을 보여줄 수 있습니다.",
            "{gua_name}의 {yao_pos}는 직급 상승의 조짐입니다. 준비된 모습을 보여주세요.",
            "형통의 {gua_name}괘. 연말 인사에서 기대 이상의 결과가 있을 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 커리어 정점을 향해 달려가게 합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 정체 기운입니다. 올해 승진은 어려울 수 있으니 내년을 대비하세요.",
            "어두운 {gua_name}괘. 동료와의 경쟁에서 뒤처질 수 있으니 더 노력하세요.",
            "{yao_pos}의 {gua_name}은 험담을 경고합니다. 사내 정치에 휘말리지 않도록 주의하세요.",
            "{gua_name}의 막힘 기운. 상사와의 관계 개선이 우선입니다.",
            "용이 웅덩이에 있는 {gua_name}({gua_hanja}). 승진 누락에 좌절하지 말고 실력을 키우세요.",
            "{gua_name}괘가 경고합니다. 성과를 어필하는 방법을 배울 필요가 있습니다.",
            "험난한 {gua_name}의 시기. 회사 상황이 좋지 않아 승진이 연기될 수 있습니다.",
            "{gua_name}의 {yao_pos}는 인사 비리를 암시합니다. 정정당당히 경쟁하세요.",
            "흉한 {gua_name}괘. 승진 대신 역할 확대나 성장 기회에 집중하세요.",
            "{gua_name}({gua_hanja})는 때를 기다리라 합니다. 묵묵히 성과를 쌓으세요.",
        ],
    },

    "창업": {
        "positive": [
            "{gua_name}({gua_hanja})의 기운이 창업에 청신호를 보냅니다. 지금 시작해도 좋습니다.",
            "용이 세상에 나타나는 {gua_name}괘. 당신의 아이디어가 빛을 발할 때입니다.",
            "{yao_pos}의 {gua_name}은 사업 성공의 길조입니다. 자신감을 가지고 추진하세요.",
            "{gua_name}의 상승 기운이 창업 초기의 어려움을 극복하게 해줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 투자자나 파트너를 만날 수 있습니다.",
            "{gua_name}괘의 길한 기운. 매출이 빠르게 성장할 수 있는 시기입니다.",
            "새 터전을 세우는 {gua_name}의 시기. 좋은 입지나 상권을 발견할 수 있습니다.",
            "{gua_name}의 {yao_pos}는 귀인의 도움을 암시합니다. 멘토를 찾아보세요.",
            "형통의 {gua_name}괘. 첫 고객이 좋은 평가를 남겨 입소문이 날 수 있습니다.",
            "{gua_name}({gua_hanja})의 밝은 에너지가 대표님의 첫걸음을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 하강 기운입니다. 창업은 조금 더 준비 후에 시작하세요.",
            "어두운 {gua_name}괘. 시장 조사가 부족합니다. 경쟁 분석을 다시 하세요.",
            "{yao_pos}의 {gua_name}은 자금난을 경고합니다. 초기 운영자금을 넉넉히 확보하세요.",
            "{gua_name}의 막힘 기운. 동업자와의 갈등이 우려되니 계약서를 명확히 하세요.",
            "용이 늪에 빠진 {gua_name}({gua_hanja}). 과도한 대출로 창업하면 위험합니다.",
            "{gua_name}괘가 경고합니다. 트렌드에만 의존하면 금방 도태될 수 있습니다.",
            "험난한 {gua_name}의 시기. 경기 침체기에 창업하면 고생이 예상됩니다.",
            "{gua_name}의 {yao_pos}는 사기 주의보입니다. 프랜차이즈 계약 시 꼼꼼히 확인하세요.",
            "흉한 {gua_name}괘. 지금은 아이디어를 더 다듬을 시기입니다. 서두르지 마세요.",
            "{gua_name}({gua_hanja})는 준비를 요청합니다. 사업 계획을 다시 검토하세요.",
        ],
    },

    # ===== 학업 카테고리 =====
    "수능/입시": {
        "positive": [
            "{gua_name}({gua_hanja})의 상승 기운이 시험운을 높여줍니다. 합격의 기쁨이 다가옵니다.",
            "밝은 지혜의 {gua_name}괘. 집중력이 높아져 공부 효율이 올라갑니다.",
            "{yao_pos}의 {gua_name}은 노력의 결실을 알립니다. 원하는 대학에 갈 수 있습니다.",
            "{gua_name}의 길한 기운이 수능 당일 컨디션 조절에 도움을 줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 찍은 문제도 맞을 수 있는 행운이 따릅니다.",
            "{gua_name}괘의 밝은 기운. 약점 과목에서 예상외로 좋은 성적을 얻을 수 있습니다.",
            "성장하는 {gua_name}의 시기. 마지막 모의고사에서 성적이 상승할 수 있습니다.",
            "{gua_name}의 {yao_pos}는 귀인의 도움을 암시합니다. 선생님의 조언에 귀 기울이세요.",
            "형통의 {gua_name}괘. 면접이나 논술에서도 좋은 결과를 기대하세요.",
            "{gua_name}({gua_hanja})의 에너지가 대학생활의 시작을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 하강 기운입니다. 컨디션 관리에 신경 쓰세요.",
            "어두운 {gua_name}괘. 긴장으로 실력 발휘가 어려울 수 있으니 멘탈 관리가 필요합니다.",
            "{yao_pos}의 {gua_name}은 방심을 경고합니다. 마지막까지 최선을 다하세요.",
            "{gua_name}의 막힘 기운. 예상 문제만 공부하면 낭패를 볼 수 있습니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 수시보다 정시가 유리할 수 있습니다.",
            "{gua_name}괘가 인내를 요청합니다. 성적이 떨어져도 포기하지 마세요.",
            "험난한 {gua_name}의 시기. 재수/N수를 고려해야 할 수도 있습니다.",
            "{gua_name}의 {yao_pos}는 건강 문제를 암시합니다. 시험 전 충분히 쉬세요.",
            "흉한 {gua_name}괘. 목표 대학을 조정하는 것도 현명한 선택입니다.",
            "{gua_name}({gua_hanja})는 현실적 판단을 요청합니다. 안전 지원도 고려하세요.",
        ],
    },

    "자격증": {
        "positive": [
            "{gua_name}({gua_hanja})의 밝은 기운이 자격증 합격운을 높여줍니다. 이번에 붙을 수 있습니다!",
            "지혜가 열리는 {gua_name}괘. 이해가 안 되던 개념이 갑자기 풀릴 수 있습니다.",
            "{yao_pos}의 {gua_name}은 시험 합격의 길조입니다. 자신감을 가지세요.",
            "{gua_name}의 상승 기운이 시험 당일 좋은 컨디션을 만들어줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 예상 문제가 많이 출제될 수 있습니다.",
            "{gua_name}괘의 길한 기운. 실기 시험에서도 무난히 통과할 수 있습니다.",
            "결실의 {gua_name} 시기. 오랜 준비가 드디어 빛을 발할 때입니다.",
            "{gua_name}의 {yao_pos}는 행운을 암시합니다. 커트라인 근처에서 합격 가능성이 높습니다.",
            "형통의 {gua_name}괘. 한 번에 합격하여 시간과 비용을 아낄 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 자격증 취득의 기쁨을 앞당겨줍니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 하강 기운입니다. 합격선이 예상보다 높을 수 있으니 더 공부하세요.",
            "어두운 {gua_name}괘. 실기에서 실수하기 쉬우니 여러 번 연습하세요.",
            "{yao_pos}의 {gua_name}은 준비 부족을 경고합니다. 기출문제를 더 풀어보세요.",
            "{gua_name}의 막힘 기운. 시험 접수 마감일을 놓치지 않도록 주의하세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 이번 시험은 어려울 수 있으니 다음을 노려보세요.",
            "{gua_name}괘가 경고합니다. 벼락치기로는 합격이 어렵습니다.",
            "험난한 {gua_name}의 시기. 시험장 위치와 준비물을 미리 확인하세요.",
            "{gua_name}의 {yao_pos}는 컨디션 난조를 암시합니다. 충분히 쉬고 시험 보세요.",
            "흉한 {gua_name}괘. 너무 많은 자격증을 동시에 준비하면 다 놓칠 수 있습니다.",
            "{gua_name}({gua_hanja})는 집중을 요청합니다. 하나에 올인하세요.",
        ],
    },

    "공무원시험": {
        "positive": [
            "{gua_name}({gua_hanja})의 길한 기운이 공시 합격운을 밝게 비춥니다. 끝까지 포기하지 마세요!",
            "밝은 지혜의 {gua_name}괘. 오랜 노력이 드디어 결실을 맺을 때입니다.",
            "{yao_pos}의 {gua_name}은 최종 합격의 조짐입니다. 면접도 잘 될 것입니다.",
            "{gua_name}의 상승 기운이 필기 고득점을 암시합니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 경쟁률이 높아도 당신이 선택받을 수 있습니다.",
            "{gua_name}괘의 밝은 기운. 체력 시험도 무난히 통과할 수 있습니다.",
            "안정의 {gua_name} 시기. 공무원이 되어 안정적인 삶을 시작할 수 있습니다.",
            "{gua_name}의 {yao_pos}는 귀인의 도움을 암시합니다. 스터디 그룹이 도움이 됩니다.",
            "형통의 {gua_name}괘. 수험 생활의 끝이 보이기 시작합니다.",
            "{gua_name}({gua_hanja})의 에너지가 공직자의 첫걸음을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 정체 기운입니다. 올해 합격은 쉽지 않으니 장기전을 준비하세요.",
            "어두운 {gua_name}괘. 슬럼프가 올 수 있으니 멘탈 관리에 신경 쓰세요.",
            "{yao_pos}의 {gua_name}은 건강 문제를 경고합니다. 공부도 중요하지만 건강이 먼저입니다.",
            "{gua_name}의 막힘 기운. 공부 방법을 점검하고 약점을 보완하세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 직렬 변경을 고려해볼 필요가 있습니다.",
            "{gua_name}괘가 경고합니다. 면접에서 긴장으로 실수할 수 있으니 충분히 연습하세요.",
            "험난한 {gua_name}의 시기. 정원 축소나 제도 변경에 대비하세요.",
            "{gua_name}의 {yao_pos}는 고독감을 암시합니다. 가끔은 쉬어가며 공부하세요.",
            "흉한 {gua_name}괘. 합격 후 부서 배치에서 원하는 곳으로 가기 어려울 수 있습니다.",
            "{gua_name}({gua_hanja})는 인내를 요청합니다. 늦게 합격해도 평생 직장입니다.",
        ],
    },

    # ===== 연애 카테고리 =====
    "썸/호감": {
        "positive": [
            "{gua_name}({gua_hanja})의 설레는 기운입니다! 상대도 당신에게 호감이 있을 가능성이 높습니다.",
            "사랑의 불꽃이 튀는 {gua_name}괘. 적극적으로 다가가면 좋은 반응이 있을 거예요.",
            "{yao_pos}의 {gua_name}은 연인의 조짐입니다. 지금 고백해도 OK 신호가 예상됩니다.",
            "{gua_name}의 밝은 기운이 둘 사이를 가깝게 만들어줍니다.",
            "하늘이 맺어주는 {gua_name}({gua_hanja}). 우연한 만남이 운명이 될 수 있습니다.",
            "{gua_name}괘의 길한 기운. 카톡이나 연락 빈도가 늘어날 조짐입니다.",
            "꽃피는 {gua_name}의 시기. 데이트 신청을 받을 수 있는 시기입니다.",
            "{gua_name}의 {yao_pos}는 상대의 마음을 암시합니다. 긍정적이니 용기를 내세요.",
            "형통의 {gua_name}괘. 친구에서 연인으로 발전할 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 두 사람의 인연을 엮어줍니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불확실한 기운입니다. 상대의 진심을 좀 더 확인하세요.",
            "안개 속 {gua_name}괘. 상대가 다른 사람에게도 관심이 있을 수 있으니 주의하세요.",
            "{yao_pos}의 {gua_name}은 혼란을 경고합니다. 읽씹에 너무 예민해지지 마세요.",
            "{gua_name}의 정체 기운. 지금 고백하면 거절당할 가능성이 있습니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 상대가 연애할 준비가 안 됐을 수 있습니다.",
            "{gua_name}괘가 경고합니다. 너무 빠른 진도는 상대를 부담스럽게 할 수 있습니다.",
            "흐린 {gua_name}의 시기. 상대의 행동에 일희일비하지 마세요.",
            "{gua_name}의 {yao_pos}는 착각 주의보입니다. 친절을 호감으로 오해하지 마세요.",
            "흉한 {gua_name}괘. 어장관리 당하고 있을 가능성을 점검하세요.",
            "{gua_name}({gua_hanja})는 신중함을 요청합니다. 좀 더 알아가는 시간이 필요합니다.",
        ],
    },

    "고백": {
        "positive": [
            "{gua_name}({gua_hanja})의 용기의 기운입니다! 고백하면 OK를 받을 가능성이 높습니다.",
            "사랑의 문이 열리는 {gua_name}괘. 지금이 고백의 적기입니다.",
            "{yao_pos}의 {gua_name}은 두 사람의 인연을 암시합니다. 진심을 전하세요.",
            "{gua_name}의 밝은 기운이 당신의 고백을 성공으로 이끕니다.",
            "하늘이 맺어주는 {gua_name}({gua_hanja}). 상대도 당신의 고백을 기다리고 있을지도!",
            "{gua_name}괘의 길한 기운. 분위기 좋은 장소에서 고백하면 더욱 효과적입니다.",
            "꽃피는 {gua_name}의 시기. 고백 후 연인이 되어 행복한 시간을 보낼 수 있습니다.",
            "{gua_name}의 {yao_pos}는 긍정적인 답변을 암시합니다. 망설이지 마세요.",
            "형통의 {gua_name}괘. 상대의 마음도 당신을 향하고 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 두 사람의 사랑을 시작하게 합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불안한 기운입니다. 고백 타이밍을 조금 미루는 것이 좋겠습니다.",
            "닫힌 문의 {gua_name}괘. 상대가 다른 사람에게 마음이 있을 수 있습니다.",
            "{yao_pos}의 {gua_name}은 거절을 경고합니다. 친구로 남을 것인지 고민하세요.",
            "{gua_name}의 막힘 기운. 고백보다 먼저 친해지는 시간이 더 필요합니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 상대의 반응이 미지근할 수 있습니다.",
            "{gua_name}괘가 경고합니다. 분위기에 휩쓸린 고백은 후회할 수 있습니다.",
            "어두운 {gua_name}의 시기. 상대가 바쁜 시기라 고백을 부담스러워할 수 있습니다.",
            "{gua_name}의 {yao_pos}는 준비 부족을 암시합니다. 좀 더 확신이 생긴 후에 하세요.",
            "흉한 {gua_name}괘. 거절당해도 너무 상처받지 마세요. 인연이 아닌 것뿐입니다.",
            "{gua_name}({gua_hanja})는 기다림을 요청합니다. 더 좋은 때가 올 수 있습니다.",
        ],
    },

    "결혼": {
        "positive": [
            "{gua_name}({gua_hanja})의 화합의 기운입니다! 결혼 운이 매우 좋습니다. 프로포즈가 성공할 거예요.",
            "백년가약의 {gua_name}괘. 이 상대와 결혼하면 행복한 가정을 이룰 수 있습니다.",
            "{yao_pos}의 {gua_name}은 혼사가 순조로움을 알립니다. 양가 상견례도 원만합니다.",
            "{gua_name}의 밝은 기운이 결혼 준비 과정을 순탄하게 만들어줍니다.",
            "하늘이 맺어주는 {gua_name}({gua_hanja}). 천생연분의 만남입니다.",
            "{gua_name}괘의 길한 기운. 결혼식 날짜를 정하면 좋은 일이 계속됩니다.",
            "화목한 {gua_name}의 시기. 신혼여행도 행복하게 다녀올 수 있습니다.",
            "{gua_name}의 {yao_pos}는 좋은 시작을 암시합니다. 새 보금자리에서 행복이 시작됩니다.",
            "형통의 {gua_name}괘. 결혼 후 재물운과 건강운도 함께 좋아집니다.",
            "{gua_name}({gua_hanja})의 에너지가 두 사람의 평생을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불안한 기운입니다. 결혼을 서두르면 후회할 수 있으니 신중히 결정하세요.",
            "갈등의 {gua_name}괘. 양가 문제로 어려움이 있을 수 있으니 미리 대화하세요.",
            "{yao_pos}의 {gua_name}은 결혼 준비 중 갈등을 경고합니다. 서로 양보하세요.",
            "{gua_name}의 막힘 기운. 경제적 준비가 부족하면 결혼을 미루는 것이 좋습니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 상대의 숨겨진 면을 더 알아볼 필요가 있습니다.",
            "{gua_name}괘가 경고합니다. 결혼 비용 문제로 다툼이 있을 수 있으니 미리 상의하세요.",
            "험난한 {gua_name}의 시기. 결혼 후 시댁/처가 문제에 대비하세요.",
            "{gua_name}의 {yao_pos}는 권태기를 암시합니다. 결혼 전 충분히 대화하세요.",
            "흉한 {gua_name}괘. 이 상대가 맞는지 진지하게 고민해볼 필요가 있습니다.",
            "{gua_name}({gua_hanja})는 신중함을 요청합니다. 감정에 휩쓸린 결혼은 위험합니다.",
        ],
    },

    "재회": {
        "positive": [
            "{gua_name}({gua_hanja})의 인연의 기운입니다. 재회의 가능성이 보입니다.",
            "돌아오는 사랑의 {gua_name}괘. 상대도 당신을 그리워하고 있을 수 있습니다.",
            "{yao_pos}의 {gua_name}은 연락이 올 조짐입니다. 마음을 열어두세요.",
            "{gua_name}의 밝은 기운이 헤어졌던 인연을 다시 이어줍니다.",
            "하늘이 맺어주는 {gua_name}({gua_hanja}). 이번에는 더 성숙한 사랑이 가능합니다.",
            "{gua_name}괘의 길한 기운. 우연히 마주칠 수 있으니 대비하세요.",
            "봄이 오는 {gua_name}의 시기. 재회 후 과거의 문제를 극복할 수 있습니다.",
            "{gua_name}의 {yao_pos}는 미련이 남아있음을 암시합니다. 먼저 연락해 보세요.",
            "형통의 {gua_name}괘. 재회하면 예전보다 더 깊은 사랑을 나눌 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 두 번째 사랑의 기회를 열어줍니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 끊어진 기운입니다. 미련을 버리고 새 사랑을 찾는 것이 좋겠습니다.",
            "닫힌 문의 {gua_name}괘. 상대는 이미 새 사람을 만나고 있을 수 있습니다.",
            "{yao_pos}의 {gua_name}은 후회를 경고합니다. 재회해도 같은 문제로 다시 헤어질 수 있습니다.",
            "{gua_name}의 막힘 기운. 연락해도 반응이 냉담할 가능성이 높습니다.",
            "용이 웅덩이에 있는 {gua_name}({gua_hanja}). 혼자만의 미련일 수 있으니 객관적으로 보세요.",
            "{gua_name}괘가 경고합니다. 재회보다 자기 성장에 집중하는 것이 현명합니다.",
            "어두운 {gua_name}의 시기. 스토킹이나 집착으로 비춰질 수 있으니 거리를 두세요.",
            "{gua_name}의 {yao_pos}는 상처를 암시합니다. 재회하면 더 큰 상처를 받을 수 있습니다.",
            "흉한 {gua_name}괘. 헤어진 데는 다 이유가 있습니다. 앞으로 나아가세요.",
            "{gua_name}({gua_hanja})는 새 시작을 권합니다. 더 좋은 인연이 기다리고 있습니다.",
        ],
    },

    # ===== 대인관계 카테고리 =====
    "친구": {
        "positive": [
            "{gua_name}({gua_hanja})의 화합의 기운입니다. 친구와의 관계가 더욱 돈독해집니다.",
            "우정이 깊어지는 {gua_name}괘. 오랜 친구와 소중한 추억을 만들 수 있습니다.",
            "{yao_pos}의 {gua_name}은 귀인의 조짐입니다. 친구가 좋은 기회를 연결해줄 수 있습니다.",
            "{gua_name}의 밝은 기운이 친구 모임을 즐겁게 만들어줍니다.",
            "하늘이 맺어주는 {gua_name}({gua_hanja}). 새로운 친구를 사귈 수 있는 시기입니다.",
            "{gua_name}괘의 길한 기운. 서운했던 친구와 화해할 수 있습니다.",
            "따뜻한 {gua_name}의 시기. 친구에게 진심을 표현하면 관계가 더 좋아집니다.",
            "{gua_name}의 {yao_pos}는 신뢰를 암시합니다. 친구를 믿어도 좋습니다.",
            "형통의 {gua_name}괘. 친구와 함께하는 일이 성공할 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 우정을 더욱 빛나게 합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 갈등 기운입니다. 오해가 생길 수 있으니 대화로 풀어가세요.",
            "어두운 {gua_name}괘. 친구에게 돈을 빌려주면 관계가 나빠질 수 있습니다.",
            "{yao_pos}의 {gua_name}은 배신을 경고합니다. 비밀을 함부로 털어놓지 마세요.",
            "{gua_name}의 막힘 기운. 연락이 뜸해진 친구에게 서운해하지 마세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 진정한 친구와 그렇지 않은 친구를 구별하세요.",
            "{gua_name}괘가 경고합니다. 친구 관계에서 질투심이 문제가 될 수 있습니다.",
            "험난한 {gua_name}의 시기. 그룹 내 편가르기에 휘말리지 않도록 주의하세요.",
            "{gua_name}의 {yao_pos}는 절교를 암시합니다. 정리해야 할 관계가 있을 수 있습니다.",
            "흉한 {gua_name}괘. 친구의 부탁을 무조건 들어주면 이용당할 수 있습니다.",
            "{gua_name}({gua_hanja})는 거리두기를 권합니다. 가까울수록 예의를 지키세요.",
        ],
    },

    "부모/가족": {
        "positive": [
            "{gua_name}({gua_hanja})의 화목한 기운입니다. 가족과의 관계가 더욱 좋아집니다.",
            "효도의 기쁨이 있는 {gua_name}괘. 부모님께 사랑받고 있음을 느낄 수 있습니다.",
            "{yao_pos}의 {gua_name}은 가정의 평화를 알립니다. 행복한 시간을 보내세요.",
            "{gua_name}의 밝은 기운이 가족 여행이나 모임을 즐겁게 만들어줍니다.",
            "하늘이 보호하는 {gua_name}({gua_hanja}). 부모님의 건강도 양호합니다.",
            "{gua_name}괘의 길한 기운. 부모님과의 대화에서 좋은 조언을 얻을 수 있습니다.",
            "따뜻한 {gua_name}의 시기. 형제자매와의 갈등도 해결됩니다.",
            "{gua_name}의 {yao_pos}는 가족의 지지를 암시합니다. 든든한 버팀목이 있습니다.",
            "형통의 {gua_name}괘. 가족을 위한 결정이 좋은 결과를 가져옵니다.",
            "{gua_name}({gua_hanja})의 에너지가 가정에 행복을 불어넣습니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 갈등 기운입니다. 부모님과 의견 충돌이 있을 수 있으니 한 발 물러서세요.",
            "어두운 {gua_name}괘. 형제자매 간 다툼이 우려됩니다. 감정적으로 대응하지 마세요.",
            "{yao_pos}의 {gua_name}은 재산 문제를 경고합니다. 돈 문제는 명확히 해두세요.",
            "{gua_name}의 막힘 기운. 부모님의 건강에 신경 쓸 필요가 있습니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 가족에게 알리지 못한 고민이 있다면 대화하세요.",
            "{gua_name}괘가 경고합니다. 세대 차이로 인한 갈등이 커질 수 있습니다.",
            "험난한 {gua_name}의 시기. 가족 간 오해가 쌓이지 않도록 자주 연락하세요.",
            "{gua_name}의 {yao_pos}는 독립을 암시합니다. 분가 시기를 고민해볼 수 있습니다.",
            "흉한 {gua_name}괘. 가족에게 상처 주는 말을 삼가세요.",
            "{gua_name}({gua_hanja})는 인내를 요청합니다. 가족은 결국 편입니다.",
        ],
    },

    "직장동료/상사": {
        "positive": [
            "{gua_name}({gua_hanja})의 협력의 기운입니다. 동료와의 관계가 좋아져 업무도 순조롭습니다.",
            "화합의 {gua_name}괘. 팀 프로젝트에서 좋은 성과를 낼 수 있습니다.",
            "{yao_pos}의 {gua_name}은 상사의 인정을 알립니다. 좋은 평가를 받을 수 있습니다.",
            "{gua_name}의 밝은 기운이 직장 내 분위기를 좋게 만들어줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 어려운 업무를 동료가 도와줄 수 있습니다.",
            "{gua_name}괘의 길한 기운. 회식이나 워크숍에서 친밀감이 높아집니다.",
            "순조로운 {gua_name}의 시기. 갈등 있던 동료와 화해할 수 있습니다.",
            "{gua_name}의 {yao_pos}는 팀워크를 암시합니다. 협업이 시너지를 냅니다.",
            "형통의 {gua_name}괘. 상사에게 건의한 내용이 받아들여질 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 원만한 직장 생활을 만들어줍니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 갈등 기운입니다. 동료와의 마찰에 주의하세요.",
            "어두운 {gua_name}괘. 상사의 기대에 미치지 못할 수 있으니 더 노력하세요.",
            "{yao_pos}의 {gua_name}은 뒷담화를 경고합니다. 말조심하세요.",
            "{gua_name}의 막힘 기운. 업무 협조가 원활하지 않을 수 있습니다.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 동료의 공을 가로채려는 사람을 주의하세요.",
            "{gua_name}괘가 경고합니다. 상사의 비위를 맞추려다 진정성을 잃을 수 있습니다.",
            "험난한 {gua_name}의 시기. 직장 내 정치에 휘말리지 않도록 중립을 지키세요.",
            "{gua_name}의 {yao_pos}는 따돌림을 암시합니다. 혼자 고민하지 말고 도움을 구하세요.",
            "흉한 {gua_name}괘. 동료에게 지나친 기대를 하면 실망할 수 있습니다.",
            "{gua_name}({gua_hanja})는 거리두기를 권합니다. 공과 사를 구분하세요.",
        ],
    },

    # ===== 건강 카테고리 =====
    "수술/치료": {
        "positive": [
            "{gua_name}({gua_hanja})의 회복의 기운입니다. 수술이 성공적으로 끝날 것입니다.",
            "치유의 {gua_name}괘. 좋은 의료진을 만나 최선의 치료를 받을 수 있습니다.",
            "{yao_pos}의 {gua_name}은 건강 회복을 알립니다. 걱정을 내려놓으세요.",
            "{gua_name}의 밝은 기운이 빠른 회복을 도와줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 수술 날짜를 잡으면 좋은 결과가 있을 것입니다.",
            "{gua_name}괘의 길한 기운. 치료 효과가 기대 이상으로 좋을 수 있습니다.",
            "생명력 넘치는 {gua_name}의 시기. 재활도 순조롭게 진행됩니다.",
            "{gua_name}의 {yao_pos}는 완치를 암시합니다. 희망을 잃지 마세요.",
            "형통의 {gua_name}괘. 병원비 부담도 예상보다 적을 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 건강한 몸으로의 복귀를 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불안한 기운입니다. 세컨드 오피니언을 받아보세요.",
            "어두운 {gua_name}괘. 수술 부작용에 대비해야 합니다. 충분히 상담하세요.",
            "{yao_pos}의 {gua_name}은 회복 지연을 경고합니다. 무리하지 마세요.",
            "{gua_name}의 막힘 기운. 치료비 문제가 걱정될 수 있으니 보험을 확인하세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 숨겨진 질병이 있을 수 있으니 정밀검사를 받으세요.",
            "{gua_name}괘가 경고합니다. 민간요법에 의존하면 악화될 수 있습니다.",
            "험난한 {gua_name}의 시기. 재발 방지를 위해 생활습관을 바꾸세요.",
            "{gua_name}의 {yao_pos}는 스트레스를 암시합니다. 마음의 안정이 회복에 중요합니다.",
            "흉한 {gua_name}괘. 급하게 결정하지 말고 여러 병원을 알아보세요.",
            "{gua_name}({gua_hanja})는 인내를 요청합니다. 회복에는 시간이 필요합니다.",
        ],
    },

    "다이어트": {
        "positive": [
            "{gua_name}({gua_hanja})의 변화의 기운입니다! 다이어트 성공 확률이 높습니다.",
            "가벼워지는 {gua_name}괘. 운동과 식단 조절이 효과를 볼 수 있습니다.",
            "{yao_pos}의 {gua_name}은 목표 체중 달성을 암시합니다. 포기하지 마세요!",
            "{gua_name}의 밝은 기운이 의지력을 강하게 만들어줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 맞는 다이어트 방법을 찾을 수 있습니다.",
            "{gua_name}괘의 길한 기운. 요요 없이 건강하게 감량할 수 있습니다.",
            "활력의 {gua_name} 시기. 운동이 즐거워지고 습관이 됩니다.",
            "{gua_name}의 {yao_pos}는 자기 관리를 암시합니다. 꾸준함이 성공 비결입니다.",
            "형통의 {gua_name}괘. 주변에서 달라졌다는 칭찬을 들을 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 건강하고 아름다운 몸을 선물합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 정체 기운입니다. 정체기가 올 수 있으니 방법을 바꿔보세요.",
            "어두운 {gua_name}괘. 무리한 다이어트는 건강을 해칠 수 있습니다.",
            "{yao_pos}의 {gua_name}은 요요를 경고합니다. 급격한 감량은 피하세요.",
            "{gua_name}의 막힘 기운. 스트레스성 폭식에 주의하세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 체중보다 건강이 먼저입니다. 무리하지 마세요.",
            "{gua_name}괘가 경고합니다. 약물이나 보조제 남용은 위험합니다.",
            "험난한 {gua_name}의 시기. 혼자 하기 어려우면 전문가의 도움을 받으세요.",
            "{gua_name}의 {yao_pos}는 포기 위기를 암시합니다. 작은 목표부터 달성하세요.",
            "흉한 {gua_name}괘. SNS 속 몸매에 현혹되지 마세요. 자신만의 속도가 있습니다.",
            "{gua_name}({gua_hanja})는 자기 사랑을 요청합니다. 있는 그대로도 아름답습니다.",
        ],
    },

    "정신건강": {
        "positive": [
            "{gua_name}({gua_hanja})의 평화의 기운입니다. 마음이 안정을 찾아가고 있습니다.",
            "맑아지는 {gua_name}괘. 우울감이 걷히고 밝은 에너지가 채워집니다.",
            "{yao_pos}의 {gua_name}은 회복을 암시합니다. 좋은 방향으로 가고 있어요.",
            "{gua_name}의 밝은 기운이 불안을 잠재우고 희망을 줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 좋은 상담사나 치료사를 만날 수 있습니다.",
            "{gua_name}괘의 길한 기운. 새로운 취미나 활동이 마음에 활력을 줍니다.",
            "따뜻한 {gua_name}의 시기. 주변 사람들의 지지가 큰 힘이 됩니다.",
            "{gua_name}의 {yao_pos}는 자기 수용을 암시합니다. 자신을 있는 그대로 사랑하세요.",
            "형통의 {gua_name}괘. 힘든 시간을 견뎌낸 당신은 더 강해질 것입니다.",
            "{gua_name}({gua_hanja})의 에너지가 건강한 마음으로의 여정을 응원합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 무거운 기운입니다. 힘들면 전문가의 도움을 받으세요.",
            "어두운 {gua_name}괘. 혼자 견디려 하지 말고 주변에 손을 내미세요.",
            "{yao_pos}의 {gua_name}은 번아웃을 경고합니다. 쉬어가는 시간이 필요합니다.",
            "{gua_name}의 막힘 기운. SNS나 뉴스에서 잠시 거리를 두세요.",
            "용이 웅덩이에 있는 {gua_name}({gua_hanja}). 작은 일에도 자신을 칭찬해주세요.",
            "{gua_name}괘가 경고합니다. 술이나 약물로 도피하면 더 힘들어집니다.",
            "험난한 {gua_name}의 시기. 마음이 너무 힘들면 쉬어도 괜찮아요.",
            "{gua_name}의 {yao_pos}는 고립감을 암시합니다. 누군가와 대화하세요.",
            "흉한 {gua_name}괘. 자책하지 마세요. 당신 잘못이 아닙니다.",
            "{gua_name}({gua_hanja})는 도움을 요청할 용기를 권합니다. 혼자가 아닙니다.",
        ],
    },

    # ===== 취미/여행 카테고리 =====
    "여행": {
        "positive": [
            "{gua_name}({gua_hanja})의 이동의 기운입니다! 여행 운이 좋으니 계획을 세워보세요.",
            "모험의 {gua_name}괘. 새로운 곳에서 특별한 경험이 기다리고 있습니다.",
            "{yao_pos}의 {gua_name}은 즐거운 여정을 알립니다. 기대해도 좋습니다.",
            "{gua_name}의 밝은 기운이 여행 중 좋은 만남이나 행운을 가져다줍니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 항공권이나 숙소가 좋은 가격에 잡힐 수 있습니다.",
            "{gua_name}괘의 길한 기운. 동행과의 여행이 우정을 더 깊게 합니다.",
            "설레는 {gua_name}의 시기. 버킷리스트 여행지에 갈 기회가 올 수 있습니다.",
            "{gua_name}의 {yao_pos}는 안전한 여정을 암시합니다. 마음 편히 떠나세요.",
            "형통의 {gua_name}괘. 여행 중 인생샷을 건질 수 있습니다.",
            "{gua_name}({gua_hanja})의 에너지가 최고의 여행 추억을 선물합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불안한 기운입니다. 여행 일정에 변수가 생길 수 있으니 대비하세요.",
            "어두운 {gua_name}괘. 소지품 분실이나 도난에 주의하세요.",
            "{yao_pos}의 {gua_name}은 건강 문제를 경고합니다. 여행자 보험을 들어두세요.",
            "{gua_name}의 막힘 기운. 비행기 연착이나 취소 가능성이 있으니 유연하게 대처하세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 현지 사기에 주의하고 공인된 업체만 이용하세요.",
            "{gua_name}괘가 경고합니다. 무리한 일정은 피로만 남깁니다.",
            "험난한 {gua_name}의 시기. 위험 지역은 피하고 안전을 최우선으로 하세요.",
            "{gua_name}의 {yao_pos}는 동행과의 갈등을 암시합니다. 서로 양보하며 즐기세요.",
            "흉한 {gua_name}괘. 여행 경비가 예상보다 많이 들 수 있으니 넉넉히 준비하세요.",
            "{gua_name}({gua_hanja})는 신중함을 요청합니다. 계획을 꼼꼼히 세우세요.",
        ],
    },

    "경마/도박": {
        "positive": [
            "{gua_name}({gua_hanja})의 승부 기운이 올라가고 있습니다. 소액으로 즐기면 행운이 있을 수 있습니다.",
            "행운의 {gua_name}괘. 직감이 맞을 확률이 높은 시기입니다.",
            "{yao_pos}의 {gua_name}은 승리를 암시합니다. 단, 욕심은 금물입니다.",
            "{gua_name}의 밝은 기운이 작은 행운을 가져다줄 수 있습니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 비기너스 럭이 있을 수 있으니 가볍게 시도해보세요.",
            "{gua_name}괘의 길한 기운. 당첨금으로 맛있는 식사 정도는 기대해도 좋습니다.",
            "반짝이는 {gua_name}의 시기. 친구와 함께하면 더 즐거울 수 있습니다.",
            "{gua_name}의 {yao_pos}는 적당한 선에서 멈추라는 암시입니다. 한 번 따면 그만하세요.",
            "형통의 {gua_name}괘. 오락으로만 즐기면 스트레스 해소에 좋습니다.",
            "{gua_name}({gua_hanja})의 에너지가 작은 재미와 행운을 줍니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 손실 기운입니다. 오늘은 도박을 피하는 것이 좋습니다.",
            "어두운 {gua_name}괘. 본전 생각에 더 베팅하면 큰 손실로 이어집니다.",
            "{yao_pos}의 {gua_name}은 중독을 경고합니다. 자주 하고 있다면 점검이 필요합니다.",
            "{gua_name}의 막힘 기운. 지금 따려고 하면 더 잃습니다. 멈추세요.",
            "용이 웅덩이에 있는 {gua_name}({gua_hanja}). 빚내서 도박하면 인생이 무너집니다.",
            "{gua_name}괘가 경고합니다. 가족 몰래 도박하고 있다면 즉시 그만두세요.",
            "험난한 {gua_name}의 시기. 도박으로 스트레스를 풀면 역효과입니다.",
            "{gua_name}의 {yao_pos}는 불법 도박 함정을 암시합니다. 합법적인 선에서만 즐기세요.",
            "흉한 {gua_name}괘. 딴 돈은 바로 빠지고, 잃은 돈만 쌓입니다. 하지 마세요.",
            "{gua_name}({gua_hanja})는 절제를 요청합니다. 전문 상담을 받아보세요.",
        ],
    },

    # ===== 운명 카테고리 =====
    "꿈해몽": {
        "positive": [
            "{gua_name}({gua_hanja})의 길몽 기운입니다! 꿈에서 받은 메시지가 현실에서 좋은 일로 이어집니다.",
            "밝은 빛의 {gua_name}괘. 꿈에서 본 것이 예지몽일 수 있습니다.",
            "{yao_pos}의 {gua_name}은 행운의 조짐입니다. 꿈에 나온 숫자를 기억해두세요.",
            "{gua_name}의 기운이 꿈을 통해 좋은 기운을 전해줍니다.",
            "하늘이 알려주는 {gua_name}({gua_hanja}). 꿈에서 조상님을 봤다면 보호받고 있다는 의미입니다.",
            "{gua_name}괘의 길한 기운. 꿈에서 물건을 받았다면 좋은 선물이 올 수 있습니다.",
            "신비로운 {gua_name}의 시기. 반복되는 꿈에 중요한 메시지가 있습니다.",
            "{gua_name}의 {yao_pos}는 직감을 믿으라는 암시입니다. 꿈의 느낌을 따르세요.",
            "형통의 {gua_name}괘. 태몽이었다면 건강한 아이가 태어날 것입니다.",
            "{gua_name}({gua_hanja})의 에너지가 꿈을 통해 희망을 전합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불길한 기운입니다. 악몽을 꾸었다면 조심해서 나쁠 것 없습니다.",
            "어두운 {gua_name}괘. 꿈에서 쫓기거나 떨어졌다면 스트레스가 많다는 신호입니다.",
            "{yao_pos}의 {gua_name}은 경고몽을 암시합니다. 주변을 살피고 조심하세요.",
            "{gua_name}의 막힘 기운. 꿈에서 길을 잃었다면 인생의 방향을 점검해보세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 꿈에서 물에 빠졌다면 재물 손실에 주의하세요.",
            "{gua_name}괘가 경고합니다. 꿈에서 이빨이 빠졌다면 건강 검진을 받아보세요.",
            "험난한 {gua_name}의 시기. 꿈에 나온 불길한 장면에 집착하지 마세요.",
            "{gua_name}의 {yao_pos}는 해소되지 않은 감정을 암시합니다. 마음을 정리하세요.",
            "흉한 {gua_name}괘. 꿈 내용을 너무 믿지 말고 현실에 집중하세요.",
            "{gua_name}({gua_hanja})는 마음의 안정을 권합니다. 충분히 쉬세요.",
        ],
    },

    "이사/택일": {
        "positive": [
            "{gua_name}({gua_hanja})의 안정의 기운입니다! 이사하기 좋은 시기입니다.",
            "새 터전의 {gua_name}괘. 이사 후 좋은 기운이 들어옵니다.",
            "{yao_pos}의 {gua_name}은 길일을 암시합니다. 계획대로 진행하세요.",
            "{gua_name}의 밝은 기운이 새집에서의 행복을 예고합니다.",
            "하늘이 돕는 {gua_name}({gua_hanja}). 이사 방향과 날짜 모두 좋습니다.",
            "{gua_name}괘의 길한 기운. 이사 업체도 좋은 곳을 만날 수 있습니다.",
            "터전을 잡는 {gua_name}의 시기. 새 동네에서 좋은 이웃을 만날 수 있습니다.",
            "{gua_name}의 {yao_pos}는 안착을 암시합니다. 새집에서 편안함을 느낄 것입니다.",
            "형통의 {gua_name}괘. 이사 후 운이 트이기 시작합니다.",
            "{gua_name}({gua_hanja})의 에너지가 새로운 시작을 축복합니다.",
        ],
        "cautionary": [
            "{gua_name}({gua_hanja})의 불안한 기운입니다. 이사 날짜를 다시 검토해보세요.",
            "어두운 {gua_name}괘. 손 없는 날을 확인하고 이사하세요.",
            "{yao_pos}의 {gua_name}은 방향 문제를 경고합니다. 풍수지리를 참고하세요.",
            "{gua_name}의 막힘 기운. 이사 과정에서 물건 파손에 주의하세요.",
            "용이 숨어있는 {gua_name}({gua_hanja}). 새집에 하자가 있을 수 있으니 꼼꼼히 확인하세요.",
            "{gua_name}괘가 경고합니다. 급하게 결정한 이사는 후회할 수 있습니다.",
            "험난한 {gua_name}의 시기. 이사 비용이 예상보다 많이 들 수 있습니다.",
            "{gua_name}의 {yao_pos}는 적응 어려움을 암시합니다. 시간을 두고 익숙해지세요.",
            "흉한 {gua_name}괘. 가능하면 이사를 미루는 것이 좋을 수도 있습니다.",
            "{gua_name}({gua_hanja})는 신중함을 요청합니다. 충분히 알아보고 결정하세요.",
        ],
    },
}

# ========== 3. 길흉 괘 분류 ==========
# fortune_score 기반 분류
POSITIVE_HEXAGRAMS = []  # score >= 70 또는 direction == "상승"
CAUTIONARY_HEXAGRAMS = []  # score <= 40 또는 direction == "하강"

def load_hexagram_data():
    """384효 데이터 로드"""
    data_path = Path(__file__).parent.parent / "data" / "hexagram_384yao.json"

    if not data_path.exists():
        print(f"[ERROR] 데이터 파일을 찾을 수 없습니다: {data_path}")
        return []

    with open(data_path, 'r', encoding='utf-8') as f:
        return json.load(f)


def classify_hexagrams(hexagram_data: List[dict]) -> Tuple[List[dict], List[dict]]:
    """길흉에 따라 괘 분류"""
    positive = []
    cautionary = []

    for hex_item in hexagram_data:
        score = hex_item.get('fortune_score', 50)
        direction = hex_item.get('fortune_direction', '정체')

        if score >= 70 or direction == '상승':
            positive.append(hex_item)
        elif score <= 40 or direction == '하강':
            cautionary.append(hex_item)

    return positive, cautionary


def generate_interpretation(template: str, hexagram: dict) -> str:
    """템플릿에 괘 정보를 채워 해석 생성"""
    yao_pos_map = {
        1: "초효", 2: "이효", 3: "삼효",
        4: "사효", 5: "오효", 6: "상효"
    }

    return template.format(
        gua_name=hexagram.get('gua_name_kr', ''),
        gua_hanja=hexagram.get('gua_name_hanja', ''),
        yao_pos=yao_pos_map.get(hexagram.get('yao_position', 1), ''),
    )


def generate_500_interpretations(output_format: str = 'sql') -> str:
    """500개 해석 생성"""

    # 1. 384효 데이터 로드
    hexagram_data = load_hexagram_data()
    if not hexagram_data:
        return "데이터 로드 실패"

    print(f"[OK] {len(hexagram_data)}개 효 데이터 로드 완료")

    # 2. 길흉 분류
    positive_hexagrams, cautionary_hexagrams = classify_hexagrams(hexagram_data)
    print(f"[OK] 긍정 괘: {len(positive_hexagrams)}개, 주의 괘: {len(cautionary_hexagrams)}개")

    # 3. 해석 생성
    interpretations = []
    interpretation_id = 1

    for category in SELECTED_CATEGORIES:
        cat_id = category['id']
        sub_name = category['sub']

        # 해당 카테고리의 템플릿 가져오기
        templates = INTERPRETATION_TEMPLATES.get(sub_name)
        if not templates:
            print(f"[WARN] '{sub_name}' 카테고리 템플릿 없음 - 기본 템플릿 사용")
            templates = {
                "positive": [
                    "{gua_name}({gua_hanja})의 길한 기운이 {sub_name}에 좋은 영향을 줍니다.".replace("{sub_name}", sub_name),
                ] * 10,
                "cautionary": [
                    "{gua_name}({gua_hanja})의 주의 기운입니다. {sub_name}에 신중해야 합니다.".replace("{sub_name}", sub_name),
                ] * 10,
            }

        # 긍정 해석 10개
        pos_templates = templates.get('positive', [])[:10]
        for i, template in enumerate(pos_templates):
            if positive_hexagrams:
                hex_item = positive_hexagrams[i % len(positive_hexagrams)]
                text = generate_interpretation(template, hex_item)
                interpretations.append({
                    'id': interpretation_id,
                    'hexagram_id': hex_item['id'],
                    'category_id': cat_id,
                    'period': 'daily',
                    'base_text': text,
                    'tone_hint': '희망적',
                })
                interpretation_id += 1

        # 주의 해석 10개
        caut_templates = templates.get('cautionary', [])[:10]
        for i, template in enumerate(caut_templates):
            if cautionary_hexagrams:
                hex_item = cautionary_hexagrams[i % len(cautionary_hexagrams)]
                text = generate_interpretation(template, hex_item)
                interpretations.append({
                    'id': interpretation_id,
                    'hexagram_id': hex_item['id'],
                    'category_id': cat_id,
                    'period': 'daily',
                    'base_text': text,
                    'tone_hint': '현실적',
                })
                interpretation_id += 1

    print(f"[OK] 총 {len(interpretations)}개 해석 생성 완료")

    # 4. 출력
    if output_format == 'sql':
        return generate_sql(interpretations)
    elif output_format == 'json':
        return json.dumps(interpretations, ensure_ascii=False, indent=2)
    else:
        return str(interpretations)


def generate_sql(interpretations: List[dict]) -> str:
    """SQL INSERT 문 생성"""
    sql_lines = [
        "-- 500개 카테고리별 해석 데이터",
        "-- Generated by generate_500_interpretations.py",
        "",
        "BEGIN;",
        "",
    ]

    for interp in interpretations:
        # SQL 이스케이프
        base_text = interp['base_text'].replace("'", "''")

        sql_lines.append(
            f"INSERT INTO interpretations (hexagram_id, category_id, period, base_text, tone_hint) "
            f"VALUES ('{interp['hexagram_id']}', {interp['category_id']}, '{interp['period']}', "
            f"'{base_text}', '{interp['tone_hint']}');"
        )

    sql_lines.extend([
        "",
        "COMMIT;",
        "",
        f"-- Total: {len(interpretations)} interpretations",
    ])

    return "\n".join(sql_lines)


def main():
    import argparse
    import sys
    import io

    # Windows 콘솔 인코딩 문제 해결
    sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8', errors='replace')

    parser = argparse.ArgumentParser(description='500개 해석 자동 생성')
    parser.add_argument('--output', choices=['sql', 'json'], default='sql', help='출력 형식')
    parser.add_argument('--insert', action='store_true', help='DB에 직접 삽입')
    parser.add_argument('--file', type=str, help='출력 파일 경로')

    args = parser.parse_args()

    result = generate_500_interpretations(args.output)

    if args.file:
        output_path = Path(args.file)
        output_path.write_text(result, encoding='utf-8')
        print(f"[OK] 파일 저장 완료: {output_path}")
    else:
        # 기본 경로에 저장
        output_dir = Path(__file__).parent.parent / "data"
        if args.output == 'sql':
            output_path = output_dir / "interpretations_500.sql"
        else:
            output_path = output_dir / "interpretations_500.json"

        output_path.write_text(result, encoding='utf-8')
        print(f"[OK] 파일 저장 완료: {output_path}")

    if args.insert:
        print("[WARN] DB 직접 삽입은 별도 구현 필요")


if __name__ == "__main__":
    main()
