# 🤖 차세대 AI 담당자를 위한 스크래퍼 인계 보고서

## 1. 프로젝트 현황 요약
이 프로젝트는 전라남도 22개 시군의 보도자료를 수집하는 `koreanews` 시스템입니다.
현재 가장 중요한 작업은 **"이미지 수집 경량화(Lightweight v3)"**입니다.
이전에는 이미지를 다운로드하여 재업로드했으나, 속도와 차단 문제로 인해 **HTML 내 이미지 주소(src)를 직접 수집하는 방식**으로 변경했습니다.

## 2. 핵심 아키텍처 (필독)
모든 스크래퍼는 `scrapers/utils/scraper_utils.py`를 기반으로 작동합니다.
새로운 코드를 짤 때 다음 규칙을 반드시 지켜주세요.

1.  **Playwright 동기 모드(`sync_playwright`) 사용**: 비동기(`async`)는 사용하지 않습니다.
2.  **`safe_goto` 함수 사용**: 페이지 로딩 실패 시 자동으로 재시도합니다.
3.  **`wait_and_find` 함수 사용**: 요소가 나타날 때까지 기다리며, 여러 개의 셀렉터 후보를 순차적으로 시도합니다.
4.  **이미지 다운로드 금지**: 특별한 이유가 없다면 `cloudinary_uploader`를 사용하지 말고, 이미지 URL 문자열만 DB에 저장하세요.

---

## 3. 시군별 상세 인계 사항

### ✅ 1. 목포시 (Mokpo) - [표준 참조 모델]
*   **상태:** 🟢 **정상 작동**
*   **코드 경로:** `scrapers/mokpo_scraper.py`
*   **핵심 가이드:**
    *   가장 표준적인 구조입니다. 새로운 스크래퍼를 만들 때 이 코드를 `복사 -> 붙여넣기` 해서 시작하세요.
    *   목록은 `a.item_cont`, 본문은 `div.viewbox`를 찾으면 됩니다.

### ✅ 2. 진도군 (Jindo) - [수정 완료된 특이 케이스]
*   **상태:** 🟢 **정상 작동**
*   **코드 경로:** `scrapers/jindo_scraper.py`
*   **핵심 가이드:**
    *   초기에 수집 실패했으나, 분석 결과 URL과 선택자가 특이했던 것으로 밝혀졌습니다.
    *   **주의:** URL이 `/news/press`가 아니라 `/home/sub.cs?m=626`입니다. (숨겨진 진짜 주소)
    *   **페이지네이션:** 주소 뒤에 `&pageIndex=1` 형태로 붙여야 합니다.
    *   신안군, 완도군이 이 진도군과 같은 솔루션(홈페이지 제작사)을 썼을 확률이 높으니 참고하세요.

### ❌ 3. 신안군 (Shinan) - [수리 필요]
*   **상태:** 🔴 **목록 수집 실패**
*   **코드 경로:** `scrapers/shinan_scraper.py`
*   **문제점:**
    *   현재 코드는 목록을 `tbody tr`(표)로 찾고 있는데, 실제로는 `ul > li` 구조일 가능성이 높습니다 (진도군처럼).
    *   현재 실행하면 "모든 셀렉터 실패" 에러가 뜹니다.
*   **요청 사항:**
    *   브라우저로 직접 들어가서 개발자 도구(F12)로 목록의 HTML 구조를 확인하고 `LIST_SELECTORS`를 수정해주세요.

### ⚠️ 4. 무안군, 영광군, 함평군
*   **상태:** 🟡 **검증 대기**
*   **가이드:**
    *   로직은 최신화되었으나, 실제 사이트 구조와 셀렉터가 맞는지 확인하지 못했습니다.
    *   한 번씩 `dry-run`으로 돌려보고, 목록을 못 가져오면 신안군처럼 셀렉터를 업데이트해야 합니다.

---

## 4. 인계 받은 AI에게 남기는 조언
*   **"진도군"을 믿으세요:** 안 되는 곳이 있다면 진도군 코드를 참고해 보세요. 전남 지자체들은 비슷한 홈페이지 업체를 쓰는 경우가 많습니다.
*   **디버깅 팁:** 수집이 안 되면 `scrapers/debug_jindo_dump.py` 같은 파일을 만들어서, 로봇이 보는 실제 HTML을 파일로 저장해 보세요. 눈으로 보는 것과 다를 수 있습니다.
*   **이미지:** 이미지가 엑박(X)으로 나오면, 그때만 "Stealth Mode(Referer 헤더 조작)"를 고민하세요. 처음부터 복잡하게 만들 필요 없습니다.

잘 부탁드립니다.
