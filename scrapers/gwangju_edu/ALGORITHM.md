# ê´‘ì£¼ì‹œêµìœ¡ì²­ ìŠ¤í¬ë˜í¼ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì„œ
> **íŒŒì¼:** `gwangju_edu_scraper.py`  
> **ë²„ì „:** v4.0 (Hybrid - CLI + Playwright)  
> **ìµœì¢… ìˆ˜ì •:** 2025-12-11

---

## ğŸ“‹ ê°œìš”

| í•­ëª© | ê°’ |
|------|-----|
| **ëŒ€ìƒ ì‚¬ì´íŠ¸** | https://enews.gen.go.kr |
| **ìˆ˜ì§‘ ëŒ€ìƒ** | í™ë³´ê´€ ë³´ë„ìë£Œ (sid=25) |
| **Region Code** | `kedu` |
| **Category** | `ê´‘ì£¼êµìœ¡ì²­` |

---

## ğŸ†• v4.0 í•˜ì´ë¸Œë¦¬ë“œ íŠ¹ì§•

| ì¶œì²˜ | ê°€ì ¸ì˜¨ ê¸°ëŠ¥ |
|------|-------------|
| **JS/Puppeteer ì½”ë“œ** | CLI ì˜µì…˜, ë‚ ì§œ í•„í„°ë§, ì¡°ê¸° ì¢…ë£Œ ìµœì í™” |
| **Python v3.1** | Playwright, Supabase API, Cloudinary ì—…ë¡œë“œ |

---

## ğŸ”„ ë™ì‘ íë¦„ (Algorithm Flow)

```mermaid
flowchart TD
    A[ì‹œì‘] --> B[CLI ì˜µì…˜ íŒŒì‹±]
    B --> C[ëª©ë¡ í˜ì´ì§€ 1~N ìˆœíšŒ]
    C --> D[ê¸°ì‚¬ ë§í¬ + ë‚ ì§œ ìˆ˜ì§‘]
    D --> E{ë‚ ì§œ í•„í„°ë§}
    E -->|ë²”ìœ„ ë‚´| F[ë§í¬ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€]
    E -->|ë²”ìœ„ ì´ˆê³¼ 3íšŒ ì—°ì†| G[ì¡°ê¸° ì¢…ë£Œ]
    F --> H{ìµœëŒ€ ê¸°ì‚¬ ìˆ˜ ë„ë‹¬?}
    H -->|No| C
    H -->|Yes| I[ìƒì„¸ í˜ì´ì§€ ë°©ë¬¸]
    I --> J[JS evaluateë¡œ ì œëª©/ë³¸ë¬¸/ì´ë¯¸ì§€ ì¶”ì¶œ]
    J --> K[ë°ì´í„° ê²€ì¦]
    K --> L{ê²€ì¦ í†µê³¼?}
    L -->|Yes| M[DB ì €ì¥ ë˜ëŠ” Dry-run]
    L -->|No| N[ìŠ¤í‚µ]
    M --> O[ë‹¤ìŒ ê¸°ì‚¬]
    N --> O
    O --> P[ì¢…ë£Œ ë° JSON ì €ì¥]
```

---

## ğŸ“Œ CLI ì˜µì…˜

```bash
# ê¸°ë³¸ ì‹¤í–‰ (3í˜ì´ì§€, 12ê°œ)
python gwangju_edu_scraper.py

# íŠ¹ì • ë‚ ì§œë§Œ
python gwangju_edu_scraper.py --exact-date 2025-12-11

# ë‚ ì§œ ë²”ìœ„
python gwangju_edu_scraper.py --start-date 2025-12-01 --end-date 2025-12-11

# í˜ì´ì§€/ê¸°ì‚¬ ìˆ˜ ì¡°ì ˆ
python gwangju_edu_scraper.py --max-pages 5 --max-articles 30

# ë“œë¼ì´ëŸ° + JSON ì¶œë ¥
python gwangju_edu_scraper.py --max-articles 3 --dry-run --output result.json
```

---

## ğŸ” í•µì‹¬ ì…€ë ‰í„°

| í•­ëª© | ì…€ë ‰í„° | ì„¤ëª… |
|------|--------|------|
| **ëª©ë¡** | `a[href*='wbb=md:view;uid:']` | ê¸°ì‚¬ ë§í¬ ì§ì ‘ ì„ íƒ (ul/li ì•„ë‹˜) |
| **ì œëª©** | `div.view_top` ë‚´ í…ìŠ¤íŠ¸ | JS evaluateë¡œ ë©”íƒ€ì •ë³´ ì œì™¸ |
| **ë³¸ë¬¸** | `div.board_press` | JS evaluateë¡œ ë¶ˆí•„ìš” ìš”ì†Œ ì œê±° |
| **ì´ë¯¸ì§€** | `file_download('uid')` íŒ¨í„´ | ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë§í¬ íŒŒì‹± |

---

## ğŸ“ ì´ë¯¸ì§€ ì²˜ë¦¬

ì´ ì‚¬ì´íŠ¸ëŠ” ì´ë¯¸ì§€ë¥¼ `<img>` íƒœê·¸ê°€ ì•„ë‹Œ **ì²¨ë¶€íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë§í¬**ë¡œ ì œê³µí•©ë‹ˆë‹¤.

```javascript
// íŒ¨í„´
<a href="javascript:file_download('274997');">[ì‚¬ì§„] í–‰ì‚¬.jpg</a>

// ë‹¤ìš´ë¡œë“œ URL ìƒì„±
https://enews.gen.go.kr/v5/decoboard/download.php?uid=274997
```

â†’ Cloudinary ì—…ë¡œë“œ í›„ URL ì €ì¥

---

## âš™ï¸ ì„¤ì •ê°’ (Constants)

```python
REGION_CODE = 'kedu'
REGION_NAME = 'ê´‘ì£¼ì‹œêµìœ¡ì²­'
CATEGORY_NAME = 'ê´‘ì£¼êµìœ¡ì²­'
BASE_URL = 'https://enews.gen.go.kr'
LIST_URL = 'https://enews.gen.go.kr/v5/?sid=25'
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
scrapers/gwangju_edu/
â”œâ”€â”€ gwangju_edu_scraper.py        # v4.0 ë©”ì¸ (Hybrid)
â”œâ”€â”€ gwangju_edu_scraper_old.py    # v3.1 ë°±ì—…
â”œâ”€â”€ gwangju_edu_scraper_v5_pyppeteer.py  # Pyppeteer ë²„ì „ (ë¯¸ì‚¬ìš©)
â”œâ”€â”€ ALGORITHM.md                   # ì´ ë¬¸ì„œ
â”œâ”€â”€ test_results/                  # í…ŒìŠ¤íŠ¸ ê²°ê³¼
â”œâ”€â”€ fix_wrong_titles.py           # ì œëª© ìˆ˜ì • ìœ í‹¸
â””â”€â”€ update_existing_posts.py      # ê¸°ì¡´ ê²Œì‹œë¬¼ ì—…ë°ì´íŠ¸
```

---

## ğŸš¨ íŠ¹ì´ì‚¬í•­

1. **ëª©ë¡ êµ¬ì¡° íŠ¹ìˆ˜ì„±**  
   ì¼ë°˜ì ì¸ `<ul><li>` êµ¬ì¡°ê°€ ì•„ë‹ˆë¼ `<a>` íƒœê·¸ê°€ ì§ì ‘ ë‚˜ì—´ë¨

2. **ì œëª© ì¶”ì¶œ ì–´ë ¤ì›€**  
   ì œëª©ì´ ë³„ë„ íƒœê·¸ ì—†ì´ `div.view_top` í…ìŠ¤íŠ¸ì— í¬í•¨ë¨  
   â†’ ë©”íƒ€ì •ë³´(ì‘ì„±ì¼, ì¡°íšŒìˆ˜ ë“±) ì œì™¸ ë¡œì§ í•„ìš”

3. **ì´ë¯¸ì§€ ì²¨ë¶€íŒŒì¼ ë°©ì‹**  
   `file_download()` JavaScript í•¨ìˆ˜ë¡œ ë‹¤ìš´ë¡œë“œ  
   â†’ JS evaluateë¡œ UID ì¶”ì¶œ í›„ ë‹¤ìš´ë¡œë“œ URL ìƒì„±

4. **ë‚ ì§œ í•„í„°ë§**  
   ì—°ì† 3í˜ì´ì§€ ë¹ˆ ê²°ê³¼ ì‹œ ì¡°ê¸° ì¢…ë£Œ (íš¨ìœ¨í™”)

---

## ğŸ“Š v4.0 í…ŒìŠ¤íŠ¸ ê²°ê³¼ (2025-12-11)

| ì§€í‘œ | ê²°ê³¼ |
|------|------|
| ëª©ë¡ ìˆ˜ì§‘ | 8ê°œ ë°œê²¬ |
| ìƒì„¸ ìˆ˜ì§‘ | 3ê°œ ì„±ê³µ |
| ì†Œìš” ì‹œê°„ | 25.31ì´ˆ |
| ì´ë¯¸ì§€ ì¶”ì¶œ | âœ… ì„±ê³µ |
