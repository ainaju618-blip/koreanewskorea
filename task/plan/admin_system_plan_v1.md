# Korea NEWS 통합 관리자 시스템 (CMS) 기획서 v1.0

## 1. 개요 (Overview)
본 기획서는 'Korea NEWS'의 운영을 총괄하는 **통합 관리자 시스템**과 지역 기자를 위한 **기사 송고 시스템**, 그리고 **자동화된 스크래핑 봇**을 유기적으로 연결하는 CMS(Content Management System) 구축 계획입니다.

> **핵심 목표:** "모든 뉴스는 이곳으로 모이고, 이곳에서 나간다."
>
> 1. **통합 관리:** AI 봇, 기자, 데스크의 모든 활동을 한눈에 파악.
> 2. **효율성:** 스크래핑된 보도자료의 자동 분류 및 빠른 승인 처리.
> 3. **확장성:** 추후 1인 미디어에서 다수의 기자 시스템으로 확장 가능하도록 설계.

---

## 2. 핵심 요구사항 (Core Requirements)

사용자가 요청한 3대 핵심 모듈입니다.

### 2.1 통합 관리자 모드 (Integrative Manager)
*   **역할:** 시스템 전체를 관장하는 슈퍼 어드민 (데스크).
*   **주요 기능:**
    *   **통합 대시보드:**
        *   오늘 들어온 기사 (봇/기자 구분).
        *   승인 대기 중인 기사 수.
        *   인기 기사(조회수) 현황.
        *   서버/DB 상태 모니터링.
    *   **전체 기사 관리 (Article Manager):**
        *   `모든 기사 보기` (필터: 작성자별, 지역별, 상태별).
        *   기사 수정, 삭제, 반려, **즉시 발행(Publish)**.
        *   **긴급 공지/팝업** 설정 기능.

### 2.2 기자 전용 송고 시스템 (Reporter Mode)
*   **역할:** 각 시/군 담당 기자가 접속하여 기사를 작성하고 데스크에 송고.
*   **주요 기능:**
    *   **기사 작성 에디터 (WYSIWYG):** 텍스트 작성, 이미지 업로드.
    *   **내 기사 관리:** 내가 쓴 기사 목록 및 처리 상태(승인/반려) 확인.
    *   **임시 저장:** 작성 중인 기사 저장 기능.
    *   **송고 버튼:** 데스크에게 승인 요청 (`status: review_requested`).

### 2.3 스크래핑 봇 통합 및 승인 (Bot Integration)
*   **역할:** `CSTO` 봇이 수집한 시군 보도자료를 관리자가 검수.
*   **워크플로우:**
    1.  **수집 (Ingest):** 봇이 자동으로 DB에 `status: draft` 또는 `status: bot_pending` 상태로 저장.
    2.  **알림 (Notify):** 관리자 대시보드에 "새로운 보도자료 N건 도착" 알림.
    3.  **검수(Review):** 관리자가 내용을 훑어보고 문제 없으면 **[AI 요약 + 발행]** 버튼 클릭.
    4.  **발행 (Publish):** 사이트에 실시간 반영.

---

## 3. 제안 기능 (Agent's Advanced Ideas) 🚀

단순한 CMS를 넘어, **1인 미디어로서 생산성을 극대화**하기 위한 AI 및 자동화 기능 제안입니다.

### 3.1 AI 데스크 어시스턴트 (AI Desk) ✨
*   **기능:** 기사 작성/검수 과정에 AI가 개입.
*   **맞춤법/오타 검사:** 발행 전 자동 체크.
*   **AI 제목 추천:** "이 보도자료 내용으로는 클릭률이 낮은 제목입니다. 이렇게 바꿔보세요." (클릭 유도형 제목 생성).
*   **3줄 요약 자동 생성:** `page.tsx`의 카드 뉴스에 들어갈 요약문(`ai_summary`)을 발행 순간 자동 생성.
*   **태그 자동 추천:** 본문을 분석하여 `#나주`, `#에너지`, `#한전` 등 태그 자동 입력.

### 3.2 실시간 미리보기 (Live Preview)
*   **기능:** 기사를 발행하기 전, 실제 홈페이지(PC/모바일)에서 어떻게 보일지 미리 확인.
*   **이유:** 레이아웃(썸네일 크기, 줄바꿈 등)이 깨지지 않는지 확인하여 퀄리티 유지.

### 3.3 기자별 성과 분석 (Analytics)
*   **기능:**
    *   기자별 기사 송고 수, 조회수 합계 랭킹.
    *   "이번 달의 우수 기자" (추후 인센티브 시스템 도입 대비).
*   **봇 성과:** 봇이 가져온 기사 중 실제 발행된 비율(정확도) 모니터링.

### 3.4 미디어 라이브러리 (Media Library)
*   **기능:** 한 번 업로드한 사진을 서버에 저장해두고 '재사용' 가능하게 함.
*   **활용:** "나주시청 전경", "광주광역시 로고" 등 자주 쓰는 이미지는 매번 업로드할 필요 없이 라이브러리에서 선택.

---

## 4. 시스템 아키텍처 및 DB 설계

### 4.1 권한 체계 (Role-Based Access Control)
Supabase Auth의 `user_metadata` 또는 별도 `profiles` 테이블을 활용.

| 역할 (Role) | 권한 범위 | 설명 |
| :--- | :--- | :--- |
| **admin** | Create, Read, Update, Delete, Publish | 모든 권한. 승인/반려 가능. |
| **editor** | Create, Read, Update, Publish | 중간 관리자. 기사 승인 가능. |
| **reporter** | Create, Read(Own), Update(Draft Only) | 자신의 기사만 작성/수정 가능. 발행 불가(승인 요청만). |
| **bot** | Create (Draft Only) | API를 통해 초안(Draft)만 생성 가능. |

### 4.2 기사 상태 (Post Status)
기사의 생명주기를 관리하는 핵심 필드입니다.

| 상태값 (Status) | 설명 | 노출 여부 |
| :--- | :--- | :--- |
| `draft` | 작성 중인 임시 저장 상태. (봇 수집 기본 상태) | 미노출 |
| `review` | 기자가 송고하여 데스크 승인 대기 중. | 미노출 (관리자만 확인) |
| `approved` | 승인 완료 (발행 예약 대기 등). | 미노출 |
| **`published`** | **최종 발행.** | **홈페이지 노출** |
| `rejected` | 반려됨 (사유 기록). | 미노출 (기자에게 알림) |
| `archived` | 삭제는 아니지만 내림. | 미노출 |

### 4.3 메뉴 및 화면 구조 (Sitemap)

*   **/admin (로그인)**
*   **/admin/dashboard** (통합 대시보드)
*   **/admin/news**
    *   /write (기사 작성 - 공통 에디터)
    *   /list (전체 기사 목록 - 검색/필터)
    *   /review (승인 대기 목록 - **Core**)
    *   /bot-feed (봇 수집 현황)
*   **/admin/users** (기자/사용자 관리)
*   **/admin/settings** (사이트 설정)

---

## 5. 개발 로드맵

1.  **Step 1: DB 스키마 재정비** (Roles, Status 컬럼 추가 및 RLS 정책 수립).
2.  **Step 2: Admin 레이아웃 구축** (사이드바, 헤더, 인증 가드).
3.  **Step 3: 에디터(WYSIWYG) 구현** (이미지 업로드 포함).
4.  **Step 4: 상태 관리 로직 구현** (송고 -> 승인 -> 발행).
5.  **Step 5: 봇 연동 API 구축** (봇이 데이터를 쏠 수 있는 Endpoint 생성).
